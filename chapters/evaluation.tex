\chapter{性能评测}
\section{实验环境及方法}
我们在16台戴尔R720服务器上评估ClickNP的性能。每个FPGA都通过2个以太网端口与机架顶(top-of-rack, ToR)的戴尔S6000交换机相连。
我们在Windows Server 2012 R2上运行ClickNP。对于在Linux上运行的软件网络功能，我们使用CentOS 7.2平台，其内核版本为3.10。

为了测量网络功能的延迟，我们通过端口2将处理得到的包转发至回声(Echo)服务器。
回声服务器的FPGA中烧有回声逻辑，将收到的包发回其来源。
我们据此比较从端口1收到包起至从端口2收到回声包的时间差，得到精确到纳秒的延迟时长。
回声造成的延迟可以预先校正。

在我们的实验中，测试流量由包生成器PktGen产生，在包大小恒定为64字节时，
生成包的速率最高达到54.8Mpps。

\section{数据吞吐率及处理延迟评估}
\subsection{OpenFlow防火墙}
我们在实验中将OpenFlow防火墙与Linux防火墙以及Click+DPDK进行对比。
Linux防火墙采用IPSet处理精确匹配规则，采用IPTables处理模糊匹配规则。
我们在结果中引入了所使用的戴尔S6000交换机的性能作为参照，其防火墙处理能力有限，
只支持1.7K条模糊匹配规则。
